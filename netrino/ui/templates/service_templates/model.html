{% extends "photonic/view.html" %}

{% block content %}
    <form id="edit_entry" autocomplete="off" method='post' enctype="multipart/form-data">
        {{ form }}
    </form>
    <hr>
    <label>Static Assignments</label>
    <hr>
    <table class="display" data-url="v1/service-template/{{ id }}/model/{{ model }}/allocations/static_assignments" width="100%" data-endpoint="orchestration">
        <thead>
            <th id='path'>Path</th>
            <th id='type'>Type</th>
            <th id='value'>Value</th>
        </thead>
    </table>
    <hr>
    <label>Pool Allocations</label>
    <hr>
    <table class="display" data-url="v1/service-template/{{ id }}/model/{{ model }}/allocations/pool_allocations" width="100%" data-endpoint="orchestration">
        <thead>
            <th id='path'>Path</th>
            <th id='type'>Type</th>
            <th id='pool'>Pool</th>
        </thead>
    </table>
    <hr>
    <label>Mappings</label>
    <hr>
    <table class="display" data-url="v1/service-template/{{ id }}/model/{{ model }}/allocations/mappings" width="100%" data-endpoint="orchestration">
        <thead>
            <th id='path'>Path</th>
            <th id='mapper'>Mapper</th>
        </thead>
    </table>
    <hr>
    <label>Copy Entries</label>
    <hr>
    <table class="display" data-url="v1/service-template/{{ id }}/model/{{ model }}/allocations/copy_entries" width="100%" data-endpoint="orchestration">
        <thead>
            <th id='path'>Path</th>
            <th id='source_path'>Source Path</th>
        </thead>
    </table>
    <hr>
    <label>Task Output</label>
    <hr>
    <table class="display" data-url="v1/service-template/{{ id }}/model/{{ model }}/allocations/task_output" width="100%" data-endpoint="orchestration">
        <thead>
            <th id='path'>Path</th>
            <th id='output_path'>Output Path</th>
        </thead>
    </table>
    <hr>
    <label>User Select</label>
    <hr>
    <table class="display" data-url="v1/service-template/{{ id }}/model/{{ model }}/allocations/task_output" width="100%" data-endpoint="orchestration">
        <thead>
            <th id='path'>Path</th>
            <th id='url'>URL</th>
        </thead>
    </table>

    {% if 'edit' in view.lower() %}
    <script>
        addSelect2src("{{ model_name }}", "{{ model_name }}", 'yang_model', 'v1/yang-models');
        addSelect2src("{{ interface }}", "{{ interface }}", 'interface', 'v1/interfaces');
        addSelect2src("{{ element_id }}", "{{ element_name }}", 'element', 'v1/elements');
        /*
        $('#role_add_domain').on('select2:unselecting', function (e) {
            reset_tenant(e);
        });
        $('#role_add_domain').on('select2:select', function (e) {
            reset_tenant(e)
        });
        $('#role_add_tenant_id').on('select2:unselecting', function (e) {
            reset_role(e)
        });
        $('#role_add_tenant_id').on('select2:select', function (e) {
            reset_role(e)
        });*/
    </script>
    {% endif %}
{% endblock %}

{% block buttons %}
    {% if 'add' in view.lower() %}
    <a href="{{ APP }}/services/templates/edit/{{id}}" class="btn btn-default">Cancel</a>
    <a href="{{ APP }}/services/templates/{{id}}/edit_model/{{model}}" data-form="metadata_form" class="btn btn-primary">Edit</a>
    {% elif 'edit' in view.lower() %}
    <a href="{{ APP }}/services/templates/{{id}}/view_model/{{model}}" class="btn btn-default">Cancel</a>
    <a href="{{ APP }}/services/templates/{{id}}/edit_model/{{model}}" data-form="edit_entry" class="btn btn-primary">Update</a>
    <a href="{{ APP }}/services/templates/{{id}}/rm_model/{{model}}" class="btn btn-danger" data-close>Delete</a>
    {% else %}
    <a href="#" onclick="close_window();" class="btn btn-default">Cancel</a>
    <a href="{{ APP }}/services/templates/{{id}}/edit_model/{{model}}" class="btn btn-primary">Edit</a>
    {% endif %}
{% endblock %}
